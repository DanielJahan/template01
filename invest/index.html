<!-- Add this somewhere under the actions -->
<div id="yourRefWrap" style="display:none;margin-top:.5rem;">
  <label><strong>Your referral link</strong></label>
  <div class="row gtr-uniform">
    <div class="col-9"><input id="yourRefLink" type="text" class="fit" readonly></div>
    <div class="col-3"><a id="copyRef" class="button fit">Copy</a></div>
  </div>
</div>

<script>
  async function onConnected(addr) {
    const link = `${location.origin}/invest?ref=${addr}`;
    const wrap = document.getElementById("yourRefWrap");
    const input = document.getElementById("yourRefLink");
    const copy = document.getElementById("copyRef");
    if (wrap && input && copy) {
      input.value = link;
      wrap.style.display = "";
      copy.onclick = async (e) => {
        e.preventDefault();
        try { await navigator.clipboard.writeText(link); alert("Referral link copied!"); }
        catch { input.select(); document.execCommand("copy"); alert("Copied!"); }
      };
    }
  }

  // Call onConnected(currentAccount) right after a successful connect
  // Example (integrate with your existing connect code):
  // currentAccount = accounts[0]; onConnected(currentAccount);
</script>
